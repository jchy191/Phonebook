(this.webpackJsonpexample=this.webpackJsonpexample||[]).push([[0],{21:function(e,n,t){},22:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t(1),r=t.n(c),o=t(15),u=t.n(o),i=(t(21),t(6)),s=t(3),l=(t(22),t(42)),d=t(4),b=t.n(d),h="/api/persons",j=function(){return b.a.get(h).then((function(e){return e.data}))},m=function(e){return b.a.post(h,e).then((function(e){return e.data}))},f=function(e){return b.a.delete("".concat(h,"/").concat(e))},O=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))};var v=function(e){var n=e.newName,t=e.newNumber,c=e.handleChange,r=e.addPerson;return Object(a.jsxs)("form",{onSubmit:r,children:[Object(a.jsxs)("div",{children:["Name: ",Object(a.jsx)("input",{name:"name",value:n,onChange:c})]}),Object(a.jsxs)("div",{children:["Number: ",Object(a.jsx)("input",{name:"number",value:t,onChange:c})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"Add"})})]})};var x=function(e){var n=e.searchValue,t=e.handleChange;return Object(a.jsx)("form",{children:Object(a.jsxs)("div",{children:["Filter contacts: ",Object(a.jsx)("input",{name:"search",value:n,onChange:t})]})})};var p=function(e){var n=e.name,t=e.id,c=e.number,r=e.handleDelete;return Object(a.jsxs)("li",{children:[n," ",c," ",Object(a.jsx)("button",{onClick:r,name:"".concat(n),id:"".concat(t),children:"Delete?"})]})};var g=function(e){var n=e.persons,t=e.searchValue,c=e.handleDelete,r=n.filter((function(e){return new RegExp("^".concat(t),"i").test(e.name)})).sort((function(e,n){var t=e.name.toLowerCase(),a=n.name.toLowerCase();return t<a?-1:t>a?1:0}));return Object(a.jsx)("ul",{children:r.map((function(e){return Object(a.jsx)(p,{id:e.id,name:e.name,number:e.number,handleDelete:c},e.id)}))})};var w=function(e){var n=e.message,t=e.isError;if(null===n)return null;var c="notification";return t&&(c="error"),Object(a.jsx)("div",{className:"".concat(c),children:n})},C=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),u=Object(s.a)(o,2),d=u[0],b=u[1],h=Object(c.useState)(""),p=Object(s.a)(h,2),C=p[0],N=p[1],k=Object(c.useState)(""),S=Object(s.a)(k,2),D=S[0],E=S[1],y=Object(c.useState)(null),T=Object(s.a)(y,2),V=T[0],P=T[1],A=Object(c.useState)(!1),J=Object(s.a)(A,2),L=J[0],B=J[1];Object(c.useEffect)((function(){j().then((function(e){r(e)}))}),[L]);var F=function(e){switch(e.target.name){case"name":b(e.target.value);break;case"number":N(e.target.value);break;case"search":E(e.target.value)}},I=function(e){m(e).then((function(n){r(t.concat(n)),b(""),N(""),P("".concat(e.name," has been added")),setTimeout((function(){P(null)}),5e3)}))},M=function(e,n){O(e,n).then((function(e){r(t.map((function(n){return n.name!==d?n:e}))),b(""),N(""),P("".concat(n.name," has been updated")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){console.log(e)}))};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Phonebook"}),Object(a.jsx)(w,{message:V,isError:L}),Object(a.jsx)("h2",{children:"Add a New Contact:"}),Object(a.jsx)(v,{newName:d,newNumber:C,handleChange:F,addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d}));if(n){window.confirm("".concat(d," is already added to the phonebook, replace the old number with the new one?"));var a=Object(i.a)(Object(i.a)({},n),{},{number:C});M(n.id,a)}else{var c={name:d,number:C,id:Object(l.a)()};I(c)}}}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(x,{handleChange:F,searchValue:D}),Object(a.jsx)(g,{persons:t,searchValue:D,handleDelete:function(e){var n=e.target.name,a=e.target.id;window.confirm("Delete ".concat(n," from phonebook? Note that this action is not reversible."))&&f(a).then((function(e){r(t.filter((function(e){return e.id!==a}))),P("".concat(n," has been removed")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){B(!0),P("".concat(n," has already been removed from the server")),setTimeout((function(){P(null),B(!1)}),5e3)}))}})]})};u.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.2d0cf400.chunk.js.map